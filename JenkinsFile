pipeline 
{
    environment 
    {   
		GIT_REPOSITORY = 'git@gitlab.com:Geeks.Microservices/AccessHub.git'		
    }
    agent any
    stages
	{    		
            stage('Clone sources') 
            {
                steps
                {
                    script
                        {						
							git url: GIT_REPOSITORY
                        }
                }				
            }			

    }        
     post
    {
		failure
		{
			script 
			{
				echo 'Failed to deploy HUB to production'
			}
		}
		success
		{
			script 
			{
				echo 'Deployed HUB to production'
			}
		}
        always
        {
			script{
				// make sure that the Docker image is removed
				sh '''docker rmi $IMAGE | true'''
			}
        }
    }
}

